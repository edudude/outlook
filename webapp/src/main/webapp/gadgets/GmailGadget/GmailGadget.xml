<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="eXo Gadget"
      description="eXo for Gmail"
      height="20"
      author="Peter Nedonosko"
      author_email="pnedonosko@exoplatform.com"
      author_location="Ukraine">
    <Require feature="opensocial-0.9" />
    <Require feature="dynamic-height"/>
    <Require feature="google.contentmatch">
      <Param name="extractors">google.com:RawSubjectExtractor</Param>
      <Param name="extractors">google.com:SenderEmailExtractor</Param>
      <Param name="extractors">google.com:RecipientEmailExtractor</Param>
      <Param name="extractors">google.com:MessageIDExtractor</Param>
    </Require>
  </ModulePrefs>
  <Content type="html" view="card">
    <![CDATA[ 
    <!--
        google.com:RawSubjectExtractor 
        google.com:SenderEmailExtractor
        google.com:RecipientEmailExtractor
        google.com:EmailTimeExtractor
    -->    
    <head>
      <!-- link type="text/css" rel="stylesheet" href="http://demo-outlook.exoplatform.org/outlook/style/gmail-gadget.css" / -->    
      <script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <script type="text/javascript">
        <!-- Fetch the array of content matches. -->
        function init() {
          var matches = google.contentmatch.getContentMatches();
          var matchList = document.createElement('ul');
          <!-- Iterate through the array and display output for each match. -->
          for (var match in matches) {
            for (var key in matches[match]) {
              var listItem = document.createElement('li');
              var extractedText = document.createTextNode(key + ": " + matches[match][key]);
              listItem.appendChild(extractedText);
              matchList.appendChild(listItem);
            }
          }
          document.body.appendChild(matchList);
          gadgets.window.adjustHeight(100);          
        }
        gadgets.util.registerOnLoadHandler(init);
      </script>         
    </head>
    
    <body id="GmailGadget">
      <div class="UIGadgetThemes">
        <div class="gadgetTitle">eXo for Gmail</div>
        <div>TODO</div>
      </div> 
    </body>
    
    ]]>
  </Content>
</Module>